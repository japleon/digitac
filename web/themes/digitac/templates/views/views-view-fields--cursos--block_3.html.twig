<div class="block-slider-news__item block-slider-news__item--flex">
    <div class="block-slider-news__item-container">
        {% if fields.field_curso_imagen.content|render|striptags('<img>')|trim %}
        <div class="block-slider-news__item-image">
            {{ fields.field_curso_imagen.content }}
        </div>
        {% else %}
            Hay que poner una imagen por defecto???
        {% endif %}

        <div class="block-slider-news__item-content">
            <div class="category">
                <span class="type">{{ fields.field_curso_categoria.content }}</span>
            </div>
            <div class="title">
            <a href="{{ fields.view_node.content|render|striptags|trim }}" class="btn btn--link">
                {{ fields.title.content }}
            </a>
            </div>
            <div class="content">{{ fields.body.content }}</div>
            <div class="tags">
                {% if fields.field_curso_target.content|render|striptags|trim %}
                    {% set tags = fields.field_curso_target.content|render|striptags|trim|split('|') %}
                    {% for key,item in tags %}
                        <span class="tag target">{{item}}</span>
                    {% endfor %}
               {% endif %}
                {% if fields.field_curso_tipo.content|render|striptags|trim %}
               <span class="tag">{{ fields.field_curso_tipo.content }}</span>
               {% endif %}
                {% if fields.field_curso_gratuidad.content|render|striptags|trim %}
               <span class="tag pay">{{ fields.field_curso_gratuidad.content }}</span>
               {% endif %}
                {% if fields.field_curso_fecha_inicio.content|render|striptags|trim %}
                <span class="tag date">{{ fields.field_curso_fecha_inicio.content }}</span>
                {% endif %}

           </div>

           <div class="valoracion">
            <div class="stars">
            <!--                Aqui el problema es que una view bloque no me deja insertar el rate widget, por lo que hay que renderizarlo a mano. Cambiar la * por una imagen de una estrella rellena, y el / por media estrella, y la O por estrella vacia-->

                {% if fields.value.content|render|striptags|trim %}
                    {% set media = fields.value.content|render|striptags %}
                    {% set media_dec = media|split('.')%}

                    {% if media_dec.0 > 0 %}
                        {% for i in range(1, media_dec.0) %}
                            <img src="/themes/digitac/images/icons/icon-star.svg" alt=""/>
                        {% endfor %}
                    {% else %}
                        {% set media_final= 0 %}
                    {% endif %}

                    {% set media_final= media_dec.0 %}
                    {% if media_dec.1 matches '/^[1-9]+/' %}
                        <img src="/themes/digitac/images/icons/icon-star-half.svg" alt=""/>
                        {% set media_final= media_dec.0 + 1 %}
                    {% endif %}
                    {% if media_final < 5 %}
                        {% for i in range(media_final,4) %}
                            <img src="/themes/digitac/images/icons/icon-star-empty.svg" alt=""/>
                        {% endfor %}
                    {% endif %}

                {% endif %}
            </div>
            <div class="votes">{{ fields.value_1.content }}</div>
           </div>

        </div>
    </div>

</div>